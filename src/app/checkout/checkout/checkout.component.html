<div *ngIf="state==='emptyCart'">
  <mat-card class="step-cards--background">
    <mat-card-title>leerer Warenkorb</mat-card-title>
    <mat-toolbar class="footer">
      <span class="fill-remaining-space"></span>
      <button mat-raised-button (click)="back()">Zurück</button>
      <span class="fill-remaining-space"></span>
    </mat-toolbar>
  </mat-card>
</div>
<mat-horizontal-stepper *ngIf="state=='ongoing'" [linear]="true" #stepper>
  <mat-step [stepControl]="firstFormGroup">
    <form [formGroup]="firstFormGroup">
      <ng-template matStepLabel>Abholstation</ng-template>
      <div class="step1-cards">
        <mat-card class="step-cards--background">
          <mat-card-title>Abholstation auswählen</mat-card-title>
          <mat-radio-group class="radio-group" formControlName="firstCtrl">
            <mat-radio-button class="radio-button" *ngFor="let location of locations" [value]="location">
              {{location.description}}
            </mat-radio-button>
          </mat-radio-group>
        </mat-card>
        <mat-card class="step-cards--background">
          <mat-card-title>Details</mat-card-title>
          <mat-card-content>
            <app-location-detail-only *ngIf="selectedLocation"
                                      [location]="selectedLocation"></app-location-detail-only>
          </mat-card-content>
        </mat-card>
      </div>
      <mat-toolbar class="footer">
        <button mat-raised-button matStepperNext (click)="back()">Abbrechen</button>
        <span class="fill-remaining-space"></span>
        <button [disabled]="!selectedLocation" mat-raised-button matStepperNext>Weiter</button>
      </mat-toolbar>
      <div>
      </div>
    </form>
  </mat-step>
  <mat-step>
    <ng-template matStepLabel>Abschliessen</ng-template>
    <app-checkout-detail [cartEntries]="cartService.getSavedCart()"></app-checkout-detail>
    <mat-card class="step-cards--background">
      <mat-card-title>Abholstation</mat-card-title>
      <mat-card-content>
        <app-location-detail-only *ngIf="selectedLocation"
                                  [location]="selectedLocation"></app-location-detail-only>
      </mat-card-content>
    </mat-card>
    <mat-toolbar class="footer">
      <button mat-raised-button matStepperNext (click)="back()">Abbrechen</button>
      <button mat-raised-button matStepperPrevious>Zurück</button>
      <span class="fill-remaining-space"></span>
      <button mat-raised-button (click)="finished()">Bestellung abschliessen</button>
    </mat-toolbar>
  </mat-step>
</mat-horizontal-stepper>
<div *ngIf="state==='saving'">
  <mat-card class="step-cards--background">
    <mat-card-title>Bestellung wird verarbeitet</mat-card-title>
    <mat-card-content>
      <p>Bitte warten ...</p>
    </mat-card-content>
    <!--<mat-spinner></mat-spinner>-->
    <mat-toolbar class="footer">
      <span class="fill-remaining-space"></span>
    </mat-toolbar>
  </mat-card>
</div>
<div *ngIf="state==='finished'">
  <mat-card class="step-cards--background">
    <mat-card-title>Bestellung abgeschlossen</mat-card-title>
    <mat-card-content>
      <p>Die Bestellnummer lautet: {{orderNumber}}.</p>
      <p>Danke für die Bestellung.</p>
    </mat-card-content>
    <mat-toolbar class="footer">
      <span class="fill-remaining-space"></span>
      <button mat-raised-button (click)="back()">Fertig</button>
      <span class="fill-remaining-space"></span>
    </mat-toolbar>
  </mat-card>
</div>
<div *ngIf="state==='error'">
  <mat-card class="step-cards--background">
    <mat-card-title>Bestellung fehlgeschlagen</mat-card-title>
    <mat-card-content>
      <p>Während der bearbeitung der Bestellung ist ein Fehler aufgetreten.</p>
      <p>{{error}}</p>
    </mat-card-content>
    <mat-toolbar class="footer">
      <span class="fill-remaining-space"></span>
      <button mat-raised-button (click)="back()">Fertig</button>
      <span class="fill-remaining-space"></span>
    </mat-toolbar>
  </mat-card>
</div>
